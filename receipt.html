<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>收银</title>

    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/receipt.css">
    <link rel="stylesheet" href="css/myAlert.css">


</head>
<body>
<div id="content">
    <div class="top">
        <div class="leftTop">
            <!--<span>&#xe634;</span>-->
        </div>
        <div class="titleTop">收银</div>
        <div class="rightTop">
            <span>&#xe65d;</span>
        </div>
    </div>
    <div class="middle">
        <form action="" id="form">
            <ul>
                <li>
                    <div class="member">
                        <span>会员：</span>
                        <input type="text" id="memTxt" class="memTxt" value="">
                        <span id="mem-icon">&#xe6be;</span>
                    </div>
                </li>
                <li>
                    <div class="tele">
                        <span>手机号：</span>
                        <input type="text" id="Tele" class="telephone" value="" autofocus>
                        <span id="tel-icon">&#xe6be;</span>
                    </div>
                </li>
                <li>
                    <div class="money">
                        <span>金额：</span>
                        <div class="text" id="monTxt"></div>
                    </div>
                </li>
                <li>
                    <div class="number">
                        <span>油枪：</span>
                        <div class="text" id="numTxt"></div>
                    </div>
                </li>
                <li id="payClass">
                    <div class="payClass">
                        <div class="payClass-item" onclick="note()">
                            <span>&#xe63e;</span>
                            <h4>微信</h4>
                        </div>
                        <div class="payClass-item" onclick="note()">
                            <span>&#xe72f;</span>
                            <h4>现金</h4>
                        </div>
                        <div class="payClass-item" onclick="note()">
                            <span>&#xe633;</span>
                            <h4>刷卡</h4>
                        </div>
                        <div class="payClass-item" onclick="note()">
                            <span>&#xe806;</span>
                            <h4>支付宝</h4>
                        </div>
                    </div>
                </li>
            </ul>
        </form>
    </div>
    <div class="foot">

    </div>
</div>
<!--手机号键盘-->
<div class="layer-content">
    <div class="form_edit clearfix">
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num">4</div>
        <div class="num">5</div>
        <div class="num">6</div>
        <div class="num">7</div>
        <div class="num">8</div>
        <div class="num">9</div>
        <div class="num">.</div>
        <div class="num">0</div>
        <div id="removeTele">删除</div>
    </div>
</div>
<!--手机自定义键盘-->
<div class="layer-content1">
    <div class="form_edit1 clearfix">
        <div class="num">1</div>
        <div class="num">2</div>
        <div class="num">3</div>
        <div class="num num2">100</div>
        <div class="num">4</div>
        <div class="num">5</div>
        <div class="num">6</div>
        <div class="num num2">200</div>
        <div class="num">7</div>
        <div class="num">8</div>
        <div class="num">9</div>
        <div class="num num2">300</div>
        <div class="num">.</div>
        <div class="num">0</div>
        <div class="num">00</div>
        <div id="remove">删除</div>
    </div>
</div>
<!--编号-->
<div class="layer-content2">
    <div class="form_edit2 clearfix">
        <div class="num">
            1
            <span>0#</span>
        </div>
        <div class="num">
            2
            <span>-10#</span>
        </div>
        <div class="num">
            3
            <span>0#</span>
        </div>
        <div class="num">
            4
            <span>-10#</span>
        </div>
        <div class="num">
            5
            <span>-10#</span>
        </div>
        <div class="num">
            6
            <span>0#</span>
        </div>
        <div class="num">
            7
            <span>-10#</span>
        </div>
        <div class="num">
            8
            <span>0#</span>
        </div>
        <div class="num">
            9
            <span>92#</span>
        </div>
        <div class="num">
            10
            <span>92#</span>
        </div>
        <div class="num">
            11
            <span>92#</span>
        </div>
        <div class="num">
            12
            <span>92#</span>
        </div>
        <div class="num">
            13
            <span>95#</span>
        </div>
        <div class="num">
            14
            <span>92#</span>
        </div>
        <div class="num">
            15
            <span>95#</span>
        </div>
        <div class="num">
            16
            <span>92#</span>
        </div>
    </div>
</div>


</body>

<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/myAlert.js"></script>


<script>
    // 点击清空输入会员
    $("#mem-icon").click(function () {
        $("#memTxt").val("");
    })


    // 取消电子会员光标
    $("#Tele").focus(function(){
        document.activeElement.blur();
    });
    // 取消手机光标
    $("#Tele").focus(function(){
        document.activeElement.blur();
    });
    // 点击清空手机号
    $("#tel-icon").click(function () {
        $("#Tele").val("");
    })




    // 点击出现手机号键盘
    $("#Tele").click(function (e) {
        $('.layer-content').animate({
            bottom: '20px'
        }, 200)
        e.stopPropagation();
        $('.layer-content1').animate({
            bottom: '-200px'
        }, 200)
        $(".layer-content1").css("display","none");
        $(".layer-content2").css("display","none");
        $(".layer-content").css("display","block");
    })
    // 点击取消手机号键盘
    $('#content').click(function(){
        $('.layer-content').animate({
            bottom: '-200px'
        }, 200)
        $(".layer-content").css("display","none");
    })

    // 点击输入手机号
    $('.form_edit .num').click(function(){
        var telephone = $("#Tele").val();
        var tel= telephone + $(this).text();

        if(telephone.length==0 && ($(this).text()=='0')||$(this).text()=='.'){
            return
        }
        if(telephone.length>=11){
            return
        }
        else{
            $("#Tele").val(tel);
        }
    })
    // 删除取消手机号输入值
    $('#removeTele').click(function(){
        var oDivHtml = $("#Tele").val();
        $("#Tele").val(oDivHtml.substring(0,oDivHtml.length-1));
    })



    // 点击出现金额键盘
    $("#monTxt").click(function (e) {
        $('.layer-content1').animate({
            bottom: '20px'
        }, 200)
        e.stopPropagation();
        $(".layer-content").css("display","none");
        $(".layer-content2").css("display","none");
        $(".layer-content1").css("display","block");
    })
    // 点击取消金额键盘
    $('#content').click(function(){
        $('.layer-content1').animate({
            bottom: '-200px'
        }, 200)
        $(".layer-content1").css("display","none");
    })

    // 键盘输入金额值
    $('.form_edit1 .num').click(function(){
        var monTxt = $("#monTxt");
        var currentText = monTxt.text();
        //console.log(oDiv);

        if($(this).hasClass('num2')) {
            monTxt.text($(this).text());
            return;
        }

        if(currentText.length == 0 && ($(this).text() == '00' || $(this).text() == '0' || $(this).text() == '.')) {
            $.myToast("金额过小");
            return;
        }
        if(currentText.length == 1 && currentText == '0' && $(this).text() != '.') {
            if($(this).text() != '00') {
                monTxt.text($(this).text());
            }
            return;
        }

        var temp= currentText + $(this).text();
        if(temp.length>5){
            $.myToast("金额过大");
        }
        else{
            monTxt.text(temp);
        }
    })

    // 删除取消金额输入值
    $('#remove').click(function(){
        var oDiv = document.getElementById("monTxt");
        var oDivHtml = oDiv.innerHTML;
        oDiv.innerHTML = oDivHtml.substring(0,oDivHtml.length-1);
    })



    // 点击出现编号
    $("#numTxt").click(function (e) {
        $('.layer-content2').animate({
            bottom: '20px'
        }, 200)
        e.stopPropagation();
        $(".layer-content").css("display","none");
        $(".layer-content1").css("display","none");
        $(".layer-content2").css("display","block");
    })
    // 点击取消编号
    $('#content').click(function(){
        $('.layer-content2').animate({
            bottom: '-200px'
        }, 200)
        $(".layer-content2").css("display","none");
    })

    // 点击输入编号
    $('.form_edit2 .num').click(function(){
        var numTxt = $("#numTxt");

        numTxt.text($(this).text());
    })


    // 粘贴文本
    //接收android传递的数据，并显示在html上
    function AndroidToWeb(scan){
        $("#memTxt"). val(scan);
    }




    // 跳转小票页面
    function note() {
        // 发送数据
        var memTxt=$("#memTxt").val();
        var tel=$("#Tele").val();
        var monTxt=$("#monTxt").text();
        var numTxt=$("#numTxt").text();
        var payClass=$(this).find("h4");
        console.log(payClass);


        // 判断不为空
        if(memTxt==""&&tel==""){
            $.myToast("请输入手机号或电子会员卡号");
            return;
        }
        else{
            if(tel!=""&&tel.length!=11){
                $.myToast("请输入正确手机号");
                return;
            }
            else{
                if(monTxt==""){
                    $.myToast("请选择金额");
                    return;
                }
                else{
                    if(numTxt==""){
                        $.myToast("请选择油枪");
                        return;
                    }
                }
            }
        }

        var datas=[memTxt,tel,monTxt,numTxt];
        console.log(datas);
        $.ajax({
            url:"qqq",
            method:"post",
            data:"datas",
            dataType:"json",
            success:function () {
                window.location.href="noteRece.html";
            }
        })
        window.location.href="noteRece.html";
    }
</script>

</html>